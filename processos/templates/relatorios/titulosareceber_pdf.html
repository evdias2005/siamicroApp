{% load static %}
<html>
<head>
<style>
    @page {
        size: a4 portrait;
        @frame header_frame {           /* Static Frame */
            -pdf-frame-content: header_content;
            left: 50pt; width: 512pt; top: 30pt; height: 100pt;
        }
        @frame content_frame {          /* Content Frame */
            left: 50pt; width: 512pt; top: 120pt; height: 632pt;
        }
        @frame footer_frame {           /* Another static Frame */
            -pdf-frame-content: footer_content;
            left: 50pt; width: 512pt; top: 800pt; height: 60pt; font-size: 8pt;
        }
    }
</style>
<div id="header_content">{{ linhalogo1 }}<br>
                         {{ linhalogo2 }}<br>
                         {{ linhalogo3 }}<br><br>
    <p align="center"><b><<< RELATÓRIO DOS TÍTULOS A RECEBER >>></b></p>
</div>
</head>

<body>
    <div id="footer_content">
        <small>Impresso em {{ emissao }} por {{ user }} - LGPD: Relatório pode conter dados pessoais e/ou sensíveis. Recomenda-se a destruição após o uso.</small>
        <hr size="0.5">
        <p align="center">
            Página <pdf:pagenumber/>
        </p>
    </div>
    {% for itemsubtot in qssubtot %}
        <hr size="0.5">
        <b>A Vencer em: {{ itemsubtot.dtvencimento }}</b>
        <br><br>
        <table>
            <tr><b>
            <td width="3%">#</td>
            <td width="30%">Cliente</td>
            <td width="8%">Emissão</td>
            <td width="8%">Parcela</td>
            <td width="8%">Dt.Vencto</td>
            <td width="8%">Vlr.Título</td>
            <td width="15%">Linha Crédito</td>
            <td width="10%">Agente</td>
            <td width="10%">Status</td>
            </b></tr>
        </table>
        {% for item in qs %}
            {% ifequal itemsubtot.dtvencimento item.dtvencimento %}
            <table>
            <tr>
                <td width="3%"><small> {{ forloop.counter }} </small></b></td>
                <td width="30%"><small> {% if item.processo.clientepf %} {{ item.processo.clientepf.nome }} {% else %}
                    {{ item.processo.clientepj.razaosocial }} {% endif %}</small></td>
                <td width="8%"><small> {{ item.dtemissao|date:"SHORT_DATE_FORMAT" }} </small></b></td>
                <td width="8%"><small> {{ item.numparcela }} </small></td>
                <td width="8%"><small> {{ item.dtvencimento|date:"SHORT_DATE_FORMAT" }} </small></b></td>
                <td width="8%"><small> {{ item.valorparcela }} </small></b></td>
                <td width="15%"><small>{{ item.processo.linhacredito }} </small></b></td>
                <td width="10%"><small>{{ item.processo.criado_por }} </small></b></td>
                <td width="10%"><small>Em aberto {% if item.dias_atraso > 0 %} {{ item.dias_atraso }} dias {% endif %}</small></b></td>
            </tr>
            </table>
            {% endifequal %}
        {% endfor %}
        <br>
        <table>
            <tr><b>
                <td width="3%">  </td>
                <td width="30%"><b>Total a Receber: {{ itemsubtot.subtotapagar|floatformat:"2" }}</b></td>
            </b></tr>
        </table>
    {% endfor %}
</body>
</html>